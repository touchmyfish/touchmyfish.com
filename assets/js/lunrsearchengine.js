
var documents = [{
    "id": 0,
    "url": "/404.html",
    "title": "404",
    "body": "404 Page does not exist!Please use the search bar at the top or visit our homepage! "
    }, {
    "id": 1,
    "url": "/about",
    "title": "ä¸€ç¾¤çƒ­çˆ±æŠ€æœ¯çš„å°ä¼™ä¼´ ğŸ’â€â™‚ï¸",
    "body": "æˆ‘ä»¬æ¥è‡ªäº”æ¹–å››æµ·ï¼Œæœ‰ç€ä¸ä¸€æ ·çš„ç”Ÿæ´»ï¼Œä½†æ˜¯æˆ‘ä»¬éƒ½çƒ­çˆ±æŠ€æœ¯ï¼Œå–œæ¬¢é»‘é­”æ³• ğŸ§™â€â™‚ï¸ ã€‚ åœ¨è¿™é‡Œæˆ‘ä»¬æ‘¸ç€é±¼ ğŸŸï¼Œåˆ†äº«ç€æŠ€æœ¯ ğŸ™†â€â™‚ï¸ã€‚ æ¬¢è¿åŠ å…¥æˆ‘ä»¬ ğŸ˜ï¼Œä¸€èµ· Touch My Fishã€‚ "
    }, {
    "id": 2,
    "url": "/categories",
    "title": "Categories",
    "body": ""
    }, {
    "id": 3,
    "url": "/",
    "title": "Home",
    "body": "      Featured:                                                                                                                                                                                                                     Python ä¸­å¦‚ä½•ä¼˜é›…åœ°å°†å­—å…¸è½¬åŒ–å¯¹è±¡                              :               ç¾¡æ…• JS çš„è¯­æ³•ç³–:                                                                                                                                                 19 Jul 2019                &lt;/span&gt;                                                                                                                                                                                                                                                                                                        å¸¸ç”¨å†…å­˜ç¼“å­˜ cacheæ¨¡å—                              :               æœ‰æ—¶å€™æƒ³åšç‚¹ç¼“å­˜ä¼˜åŒ–ï¼Œä½†åˆä¸æƒ³å»ç”¨å…¶ä»–çš„ä¸­é—´ä»¶ï¼Œä¾‹å¦‚redisç­‰ï¼Œæœ¬æ–‡ä»‹ç»äº†ä¸€äº›åŸºäºå†…å­˜çš„ç¼“å­˜å®ç°æ–¹æ³•ã€‚:                                                                                                                                                 18 Jul 2019                &lt;/span&gt;                                                                                                  All Stories:                                                                                       Python ä¸­å¦‚ä½•ä¼˜é›…åœ°å°†å­—å…¸è½¬åŒ–å¯¹è±¡              :       ç¾¡æ…• JS çš„è¯­æ³•ç³–:                                                                                                         Mayne                19 Jul 2019                                                                                                                      å¸¸ç”¨å†…å­˜ç¼“å­˜ cacheæ¨¡å—              :       æœ‰æ—¶å€™æƒ³åšç‚¹ç¼“å­˜ä¼˜åŒ–ï¼Œä½†åˆä¸æƒ³å»ç”¨å…¶ä»–çš„ä¸­é—´ä»¶ï¼Œä¾‹å¦‚redisç­‰ï¼Œæœ¬æ–‡ä»‹ç»äº†ä¸€äº›åŸºäºå†…å­˜çš„ç¼“å­˜å®ç°æ–¹æ³•ã€‚:                                                                                                         Sky                18 Jul 2019                                                                                                                      GILä¸pythonçº¿ç¨‹å®‰å…¨ å•ä¾‹æ¨¡å¼ singleton              :       ä»€ä¹ˆæ˜¯GILglobal interpreter lock â€“ å…¨å±€è§£é‡Šå™¨é”CPython è§£é‡Šå™¨æ‰€é‡‡ç”¨çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒç¡®ä¿åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œ Python bytecodeã€‚æ­¤æœºåˆ¶é€šè¿‡è®¾ç½®å¯¹è±¡æ¨¡å‹ï¼ˆåŒ…æ‹¬ dict ç­‰é‡è¦å†…ç½®ç±»å‹ï¼‰é’ˆå¯¹å¹¶å‘è®¿é—®çš„éšå¼å®‰å…¨ç®€åŒ–äº† CPython å®ç°ã€‚ç»™æ•´ä¸ªè§£é‡Šå™¨åŠ é”ä½¿å¾—è§£é‡Šå™¨å¤šçº¿ç¨‹è¿è¡Œæ›´æ–¹ä¾¿ï¼Œå…¶ä»£ä»·åˆ™æ˜¯ç‰ºç‰²äº†åœ¨å¤šå¤„ç†å™¨ä¸Šçš„å¹¶è¡Œæ€§:                                                                                                         Sky                17 Jul 2019                                                                                                                      go fmt å¼•èµ·çš„ stack overflow              :       åœ¨ GO é‡Œå®ç° String æ–¹æ³•ä¼šæ ¼å¼åŒ–è¾“å‡ºã€‚ä¾‹å¦‚ï¼š```package main:                                                                                                         vnotes                16 Jul 2019                                                                                                                      lazydocker ä½¿ç”¨æ—¶ log è¿‡é•¿çš„è§£å†³æ–¹æ¡ˆ              :       Lazydocker The lazier way to manage everything docker - jesseduffield/lazydocker:                                                                                                         elfgzp                14 Jul 2019                                                                                                                      ä¸¤ä¸ªå¸¸é‡å¯¹è±¡ï¼ŒNone ä¸ . . . (ellipsis)              :       æœ¬æ–‡ä»‹ç»äº†ä¸¤ä¸ªå¸¸é‡å¯¹è±¡Noneä¸â€¦(ellipsis)çš„ä¸€äº›ç‰¹æ€§ï¼Œå‰è€…éå¸¸å¸¸è§ï¼Œåè€…å´éå¸¸å°‘ç”¨ï¼Œä½†å…¶å®å®ƒæœ‰ä¸€äº›éå¸¸pythonicçš„ç”¨æ³•ã€‚:                                                                                                         Sky                10 Jul 2019                                            "
    }, {
    "id": 4,
    "url": "/robots.txt",
    "title": "",
    "body": "      Sitemap: {{ â€œsitemap. xmlâ€   absolute_url }}   "
    }, {
    "id": 5,
    "url": "/python/2019/07/19/dict2obj-in-py.html",
    "title": "Python ä¸­å¦‚ä½•ä¼˜é›…åœ°å°†å­—å…¸è½¬åŒ–å¯¹è±¡",
    "body": "2019/07/19 - ç¾¡æ…• JS çš„è¯­æ³•ç³–: å…ˆçœ‹ä¸‹é¢ä¸€æ®µ JS ä»£ç  12345678910111213let npc = {    name: {       first :  san ,      last:  zhang     },    hp: 1000}npc. name. first//  san npc[ name ]. first//  san JSä¸­çš„â€œå­—å…¸â€å¤©ç„¶å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ç‚¹çš„æ–¹å¼è®¿é—®å¯¹è±¡å±æ€§ã€‚è€Œ python ä¸­é€šè¿‡é”®è·å–æ˜ å°„å€¼é€šå¸¸éœ€è¦ä¸‹é¢è¿™æ ·ã€‚ 12a_dict[ key ] a_dict. get( key )æœ‰ç‚¹æ€€å¿µ JS ç®€æ´çš„è¯­æ³•äº†ã€‚ä½ è¦çŸ¥é“ç”¨ç‚¹è®¿é—®ï¼Œå¯ä»¥å°‘æ•² [ ã€   *2 ã€ ] 4 ä¸ªå­—ç¬¦ï¼Œè¿™ä¸ªè¯­æ³•ç³–éš¾é“ä¸ç”œå˜›ï¼Ÿ åœ¨ python ä¸­è¦ç”¨ç‚¹è®¿é—®ï¼Œå¿…é¡»æŠŠå­—å…¸è½¬åŒ–ä¸ºå¯¹è±¡ã€‚ å­—å…¸è½¬å¯¹è±¡: å¼ºå¤§çš„å†…ç½®ç”µæ±  1234567891011121314151617In [1]: from types import SimpleNamespaceIn [2]: npc = {  . . . : 'name': {  . . . :  'first': 'san',  . . . :  'last': 'zhang'  . . . : },  . . . : 'hp': 1000  . . . : }In [3]: npcOut[3]: {'name': {'first': 'san', 'last': 'zhang'}, 'hp': 1000}In [4]: npc = SimpleNamespace(**npc)In [5]: npc. hpOut[5]: 1000åˆ°ç›®å‰ä¸ºæ­¢ä¸€åˆ‡ OKï¼Œåˆå¯ä»¥ç‚¹ç‚¹ç‚¹äº†ã€‚ 12345678910In [6]: npc. nameOut[6]: {'first': 'san', 'last': 'zhang'}In [7]: npc. name. first---------------------------------------------------------------------------AttributeError              Traceback (most recent call last)&lt;ipython-input-7-7749b491d382&gt; in &lt;module&gt;----&gt; 1 npc. name. firstAttributeError: 'dict' object has no attribute 'first'å¾ˆæ˜æ˜¾ï¼Œå¯¹äºåµŒå¥—å­—å…¸ SimpleNamespace æ²¡æ³•è‡ªåŠ¨å¤„ç†ï¼Œåªèƒ½è½¬æ¢ç¬¬ä¸€å±‚å­—å…¸ä¸ºå¯¹è±¡ã€‚æˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œé€’å½’å¤„ç†ã€‚ å¤„ç†é€šç”¨çš„åµŒå¥—å­—å…¸: åµŒå¥—å­—å…¸ä¸­çš„å€¼ï¼Œå¯èƒ½æ˜¯ listï¼Œå¯èƒ½æ˜¯ dictï¼Œä¹Ÿå¯èƒ½æ˜¯åŸºç¡€æ•°æ®ç±»å‹ã€‚å› æ­¤åœ¨å¤„ç†é€’å½’çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä¸åŒç±»å‹çš„å€¼ï¼Œåšä¸åŒçš„å¤„ç†ã€‚ ä¸‹é¢æ¨èå†…ç½®ç”µæ± ä¸­çš„ singledispatch 123456789101112In [12]: singledispatch?Signature: singledispatch(func)Docstring:Single-dispatch generic function decorator. Transforms a function into a generic function, which can have differentbehaviours depending upon the type of its first argument. The decoratedfunction acts as the default implementation, and additionalimplementations can be registered using the register() attribute of thegeneric function. File:   /usr/local/Cellar/python/3. 7. 3/Frameworks/Python. framework/Versions/3. 7/lib/python3. 7/functools. pyType:   functionç®€å•çš„è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªè£…é¥°å™¨ã€‚å¯ä»¥ä¸ºè¢«è£…é¥°å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ³¨å†Œä¸åŒçš„å¤„ç†é€»è¾‘ã€‚ ä¸¾ä¸ªä¾‹å­ 1234567891011121314151617In [13]: @singledispatch  . . . : def mytype(obj):  . . . :   return objIn [16]: @mytype. register(list)  . . . : def handle_list(obj):  . . . :   print( i am list )  . . . :   return obj# è¿”å› list ä¹‹å‰ï¼Œæ‰“å°è‡ªå·±çš„ç±»å‹In [17]: mytype([1,2,3,4])i am listOut[17]: [1, 2, 3, 4]# å› ä¸ºæ²¡æœ‰æ³¨å†Œå¯¹äºå­—ç¬¦ä¸²çš„å¤„ç†å‡½æ•°ï¼Œæ‰€ä»¥ä¼šç›´æ¥è¿”å› objï¼Œå³ mytype çš„å¤„ç†é€»è¾‘ã€‚In [18]: mytype( a )Out[18]: 'a'ä¸‹é¢æˆ‘ä»¬æ¥æ„å»ºä¸€ä¸ªå¯ä»¥å¤„ç†åµŒå¥—å­—å…¸çš„ dict2obj å‡½æ•° 12345678910111213In [22]: @singledispatch  . . . : def dict2obj(o):  . . . :   return o  . . . :In [23]: @dict2obj. register(dict)  . . . : def handle_obj(obj):  . . . :   return SimpleNamespace(**{ k:dict2obj(v) for k,v in obj. items() })  . . . :In [24]: @dict2obj. register(list)  . . . : def handle_list(lst):  . . . :   return [ dict2obj(i) for i in lst]æµ‹è¯•ä¸€ä¸‹ 1234567891011121314151617181920212223242526In [28]: zhangsan = {'name': {'first': 'san', 'last': 'zhang'}, 'hp': 1000}In [29]: lisi = {'name': {'first': 'si', 'last': 'li'}, 'hp': 1000, 'friends': [zhangsan]}In [32]: lisiOut[32]:{'name': {'first': 'si', 'last': 'li'}, 'hp': 1000, 'friends': [{'name': {'first': 'san', 'last': 'zhang'}, 'hp': 1000}]}In [33]: obj_lisi = dict2obj(lisi)In [34]: obj_lisi. nameOut[34]: namespace(first='si', last='li')In [35]: obj_lisi. name. firstOut[35]: 'si'In [36]: obj_lisi. hpOut[36]: 1000In [37]: obj_lisi. friends[0]. nameOut[37]: namespace(first='san', last='zhang')In [38]: obj_lisi. friends[0]. name. firstOut[38]: 'san'å®Œæ•´æ¼”ç¤ºä»£ç : https://gist. github. com/mayneyao/6a09bd97237f23c0cb68730715b21851 "
    }, {
    "id": 6,
    "url": "/python/2019/07/18/Meomery-Cache.html",
    "title": "å¸¸ç”¨å†…å­˜ç¼“å­˜ cacheæ¨¡å—",
    "body": "2019/07/18 - æœ‰æ—¶å€™æƒ³åšç‚¹ç¼“å­˜ä¼˜åŒ–ï¼Œä½†åˆä¸æƒ³å»ç”¨å…¶ä»–çš„ä¸­é—´ä»¶ï¼Œä¾‹å¦‚redisç­‰ï¼Œæœ¬æ–‡ä»‹ç»äº†ä¸€äº›åŸºäºå†…å­˜çš„ç¼“å­˜å®ç°æ–¹æ³•ã€‚ è‡ªå®šä¹‰å®ç°cache: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546import timedef cached(ttl=3600*24, maxsize=None):  def decorator(func):    cache = {}    def wrapper(*args,**kwargs):      key = str(args)+str(kwargs)      if key not in cache or time. time() &gt; cache[key]['expires']:        if len(cache) &gt; maxsize:          print('cache buffer pop: %s' %key)          for key in cache. keys():            cache. pop(key)            break        else:          print ('missing: %s' %key)        cache[key] = { value : func(*args,**kwargs), expires :time. time()+ ttl}      else:        print ('hit: %s' %key)      return cache[key]['value']    return wrapper  return decorator@cached(ttl=5, maxsize=2)def add(x, y):  return x+y# æ’å…¥ç¼“å­˜for i in range(3):  print('1+%s = ' %i, add(1, i))# ç¼“å­˜å‘½ä¸­print ('==='*10)for i in range(3):  print('1+%s = ' %i, add(1, i))# ç¼“å­˜è¿‡æœŸprint ('==='*10)time. sleep(5)for i in range(3):  print('1+%s = ' %i, add(1, i))1234567891011121314151617181920missing: (1, 0){}1+0 = 1missing: (1, 1){}1+1 = 2missing: (1, 2){}1+2 = 3==============================hit: (1, 0){}1+0 = 1hit: (1, 1){}1+1 = 2hit: (1, 2){}1+2 = 3==============================cache buffer pop: (1, 0){}1+0 = 1cache buffer pop: (1, 1){}1+1 = 2cache buffer pop: (1, 2){}1+2 = 3pythonè‡ªå¸¦æ¨¡å—functools. lru_cache: @functools. lru_cache(maxsize=128, typed=False)ä¸€ä¸ªä¸ºå‡½æ•°æä¾›ç¼“å­˜åŠŸèƒ½çš„è£…é¥°å™¨ï¼Œç¼“å­˜ maxsize ç»„ä¼ å…¥å‚æ•°ï¼Œåœ¨ä¸‹æ¬¡ä»¥ç›¸åŒå‚æ•°è°ƒç”¨æ—¶ç›´æ¥è¿”å›ä¸Šä¸€æ¬¡çš„ç»“æœã€‚ç”¨ä»¥èŠ‚çº¦é«˜å¼€é”€æˆ–I/Oå‡½æ•°çš„è°ƒç”¨æ—¶é—´ã€‚ ç‰¹ç‚¹:    ç”±äºä½¿ç”¨äº†å­—å…¸å­˜å‚¨ç¼“å­˜ï¼Œæ‰€ä»¥è¯¥å‡½æ•°çš„å›ºå®šå‚æ•°å’Œå…³é”®å­—å‚æ•°å¿…é¡»æ˜¯å¯å“ˆå¸Œçš„ã€‚     ä¸åŒæ¨¡å¼çš„å‚æ•°å¯èƒ½è¢«è§†ä¸ºä¸åŒä»è€Œäº§ç”Ÿå¤šä¸ªç¼“å­˜é¡¹ï¼Œä¾‹å¦‚, f(a=1, b=2) å’Œ f(b=2, a=1) å› å…¶å‚æ•°é¡ºåºä¸åŒï¼Œå¯èƒ½ä¼šè¢«ç¼“å­˜ä¸¤æ¬¡ã€‚     å¦‚æœ maxsize è®¾ç½®ä¸º None ï¼ŒLRUåŠŸèƒ½å°†è¢«ç¦ç”¨ä¸”ç¼“å­˜æ•°é‡æ— ä¸Šé™ã€‚ maxsize è®¾ç½®ä¸º2çš„å¹‚æ—¶å¯è·å¾—æœ€ä½³æ€§èƒ½ã€‚     å¦‚æœ typed è®¾ç½®ä¸ºtrueï¼Œä¸åŒç±»å‹çš„å‡½æ•°å‚æ•°å°†è¢«åˆ†åˆ«ç¼“å­˜ã€‚ä¾‹å¦‚ï¼Œ f(3) å’Œ f(3. 0) å°†è¢«è§†ä¸ºä¸åŒè€Œåˆ†åˆ«ç¼“å­˜ã€‚  å‘½ä¸­ç‡æŸ¥çœ‹: ä¸ºäº†è¡¡é‡ç¼“å­˜çš„æœ‰æ•ˆæ€§ä»¥ä¾¿è°ƒæ•´ maxsize å½¢å‚ï¼Œè¢«è£…é¥°çš„å‡½æ•°å¸¦æœ‰ä¸€ä¸ª cache_info() å‡½æ•°ã€‚å½“è°ƒç”¨ cache_info() å‡½æ•°æ—¶ï¼Œè¿”å›ä¸€ä¸ªå…·åå…ƒç»„ï¼ŒåŒ…å«å‘½ä¸­æ¬¡æ•° hitsï¼Œæœªå‘½ä¸­æ¬¡æ•° misses ï¼Œæœ€å¤§ç¼“å­˜æ•°é‡ maxsize å’Œ å½“å‰ç¼“å­˜å¤§å° currsizeã€‚åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œå‘½ä¸­æ•°ä¸æœªå‘½ä¸­æ•°æ˜¯ä¸å®Œå…¨å‡†ç¡®çš„ã€‚ é€‚ç”¨: â€œæœ€ä¹…æœªä½¿ç”¨ç®—æ³•â€ï¼ˆLRUï¼‰ç¼“å­˜ åœ¨â€œæœ€è¿‘çš„è°ƒç”¨æ˜¯å³å°†åˆ°æ¥çš„è°ƒç”¨çš„æœ€ä½³é¢„æµ‹å› å­â€æ—¶æ€§èƒ½æœ€å¥½ï¼ˆæ¯”å¦‚ï¼Œæ–°é—»æœåŠ¡å™¨ä¸Šæœ€å—æ¬¢è¿çš„æ–‡ç« å€¾å‘äºæ¯å¤©æ›´æ”¹ï¼‰ã€‚ â€œç¼“å­˜å¤§å°é™åˆ¶â€å‚æ•°ä¿è¯ç¼“å­˜ä¸ä¼šåœ¨é•¿æ—¶é—´è¿è¡Œçš„è¿›ç¨‹æ¯”å¦‚è¯´ç½‘ç«™æœåŠ¡å™¨ä¸Šæ— é™åˆ¶çš„å¢åŠ è‡ªèº«çš„å¤§å°ã€‚ ä¸€èˆ¬æ¥è¯´ï¼ŒLRUç¼“å­˜åªåœ¨å½“ä½ æƒ³è¦é‡ç”¨ä¹‹å‰è®¡ç®—çš„ç»“æœæ—¶ä½¿ç”¨ã€‚å› æ­¤ï¼Œç”¨å®ƒç¼“å­˜å…·æœ‰å‰¯ä½œç”¨çš„å‡½æ•°ã€éœ€è¦åœ¨æ¯æ¬¡è°ƒç”¨æ—¶åˆ›å»ºä¸åŒã€æ˜“å˜çš„å¯¹è±¡çš„å‡½æ•°æˆ–è€…è¯¸å¦‚timeï¼ˆï¼‰æˆ–randomï¼ˆï¼‰ä¹‹ç±»çš„ä¸çº¯å‡½æ•°æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚ å…¶ä»–: è¯¥è£…é¥°å™¨ä¹Ÿæä¾›äº†ä¸€ä¸ªç”¨äºæ¸…ç†/ä½¿ç¼“å­˜å¤±æ•ˆçš„å‡½æ•° cache_clear() ã€‚åŸå§‹çš„æœªç»è£…é¥°çš„å‡½æ•°å¯ä»¥é€šè¿‡ wrapped å±æ€§è®¿é—®ã€‚å®ƒå¯ä»¥ç”¨äºæ£€æŸ¥ã€ç»•è¿‡ç¼“å­˜ï¼Œæˆ–ä½¿ç”¨ä¸åŒçš„ç¼“å­˜å†æ¬¡è£…é¥°åŸå§‹å‡½æ•°ã€‚ 1234567891011121314# ç®€å•æ¡ˆä¾‹ï¼Œé€šè¿‡cache_infoæŸ¥çœ‹å‘½ä¸­ç‡import functools@functools. lru_cache(maxsize=100)def add(x, y):  return x+yprint ('1+2 =',add(1,2))print (add. cache_info())print ('3+4 =',add(3,4))print (add. cache_info())print ('1+2 =',add(1,2))print (add. cache_info())1234561+2 = 3CacheInfo(hits=0, misses=1, maxsize=100, currsize=1)3+4 = 7CacheInfo(hits=0, misses=2, maxsize=100, currsize=2)1+2 = 3CacheInfo(hits=1, misses=2, maxsize=100, currsize=2)12345678910# è·å–åŸå§‹å‡½æ•°import functools@functools. lru_cache(maxsize=100)def add(x, y):  return x+yprint('å½“å‰å‡½æ•°ï¼š', add)print('è·å–åŸå§‹å‡½æ•°ï¼š', add. __wrapped__)12å½“å‰å‡½æ•°ï¼š &lt;functools. _lru_cache_wrapper object at 0x10de27e10&gt;è·å–åŸå§‹å‡½æ•°ï¼š &lt;function add at 0x10da56598&gt;cachetoolsæ¨¡å—: 1pip install cachetools1234567[33mWARNING: The directory '/Users/klook/Library/Caches/pip/http' or its parent directory is not owned by the current user and the cache has been disabled. Please check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag. [0m[33mWARNING: The directory '/Users/klook/Library/Caches/pip' or its parent directory is not owned by the current user and caching wheels has been disabled. check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag. [0mCollecting cachetools Downloading https://files. pythonhosted. org/packages/2f/a6/30b0a0bef12283e83e58c1d6e7b5aabc7acfc4110df81a4471655d33e704/cachetools-3. 1. 1-py2. py3-none-any. whlInstalling collected packages: cachetoolsSuccessfully installed cachetools-3. 1. 1Note: you may need to restart the kernel to use updated packages. 12345# çœ‹çœ‹å¯ç”¨æ¨¡å—import cachetoolsfor item in dir(cachetools):  if not item. startswith('__'):    print(item)1234567891011121314151617CacheLFUCacheLRUCacheRRCacheTTLCache_update_wrapperabcabsolute_importcachecachedcachedmethodfunctoolskeyslfulrurrttlcacheç­–ç•¥: cachetoolsæ”¯æŒçš„cacheç­–ç•¥æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼šCache   Simple cacheã€‚LFUCache Least Frequently Used (LFU) cache implementation. LRUCache Least Recently Used (LRU) cache implementation. RRCache Random Replacement (RR) cache implementation. TTLCache LRU Cache implementation with per-item time-to-live (TTL) value. LRU (Least recently used) æœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼Œå¦‚æœæ•°æ®æœ€è¿‘è¢«è®¿é—®è¿‡ï¼Œé‚£ä¹ˆå°†æ¥è¢«è®¿é—®çš„å‡ ç‡ä¹Ÿæ›´é«˜ã€‚LFU (Least frequently used) æœ€ä¸ç»å¸¸ä½¿ç”¨ï¼Œå¦‚æœä¸€ä¸ªæ•°æ®åœ¨æœ€è¿‘ä¸€æ®µæ—¶é—´å†…ä½¿ç”¨æ¬¡æ•°å¾ˆå°‘ï¼Œé‚£ä¹ˆåœ¨å°†æ¥ä¸€æ®µæ—¶é—´å†…è¢«ä½¿ç”¨çš„å¯èƒ½æ€§ä¹Ÿå¾ˆå°ã€‚ ä½¿ç”¨æ–¹æ³•:  åˆ©ç”¨cached12345678# cachedæ–¹æ³•ï¼Œ è£…é¥°å™¨ï¼Œ ä¿®é¥°å‡½æ•°def cached(cache, key=keys. hashkey, lock=None):     Decorator to wrap a function with a memoizing callable that saves  results in a cache.        def decorator(func):    if cache is None:1234567891011121314# ç”¨å­—å…¸æ¥åšcachefrom cachetools import cached@cached(cache={})def add(x, y):  print ('%s %s missing' %(x,y))  return x+yfor i in range(3):  print (add(i,10))print ('==='*10)for i in range(3):  print (add(i,10))123456789100 10 missing101 10 missing112 10 missing12==============================10111212345678910111213# ä½¿ç”¨Cachetools. Cacheæ¥åšç¼“å­˜from cachetools import cached, Cache@cached(cache=Cache(maxsize=2))  ## æ³¨æ„è¿™é‡Œçš„maxsizeä¸èƒ½å°‘äºä½ çš„å­˜å–æ•°é‡ï¼Œå¦åˆ™ç¼“å­˜ä¼šå¤±æ•ˆdef add(x, y):  print ('%s %s missing' %(x,y))  return x+yfor i in range(3):  print (add(i,10))print ('==='*10)for i in range(3):  print (add(i,10))123456789101112130 10 missing101 10 missing112 10 missing12==============================0 10 missing101 10 missing112 10 missing1212345678910111213141516# ä½¿ç”¨Cachetools. Cacheæ¥åšç¼“å­˜from cachetools import cached, LRUCache@cached(cache=LRUCache(maxsize=2)) ## æ³¨æ„è¿™é‡Œçš„maxsizeä¸èƒ½å°‘äºä½ çš„å­˜å–æ•°é‡ï¼Œå¦åˆ™ç¼“å­˜ä¼šå¤±æ•ˆdef add(x, y):  print ('%s %s missing' %(x,y))  return x+yfor i in range(3):   print ('result---&gt;', add(i,10))for i in range(3):   print ('result---&gt;', add(i,10))print ('==='*10)for i in range(3):  print ('result---&gt;', add(i,10))123456789101112131415161718190 10 missingresult---&gt; 101 10 missingresult---&gt; 112 10 missingresult---&gt; 120 10 missingresult---&gt; 101 10 missingresult---&gt; 112 10 missingresult---&gt; 12==============================0 10 missingresult---&gt; 101 10 missingresult---&gt; 112 10 missingresult---&gt; 12 åˆ©ç”¨cachedmethod12345678910# cachedmethodæ–¹æ³•ï¼Œ è£…é¥°å™¨ï¼Œ ä¿®é¥°ç±»æ–¹æ³•def cachedmethod(cache, key=keys. hashkey, lock=None):     Decorator to wrap a class or instance method with a memoizing  callable that saves results in a cache.        def decorator(method):    if lock is None:      def wrapper(self, *args, **kwargs):        c = cache(self) # è¿™é‡Œå¯¼è‡´è°ƒç”¨ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œå¯ä»¥ç”¨IDEæŸ¥çœ‹æºç 12345678910111213141516171819202122# cachedmethodçš„ä½¿ç”¨from operator import attrgetterfrom cachetools import Cache, cachedmethodclass Test:  def __init__(self, maxsize=3): ## æ³¨æ„è¿™é‡Œçš„maxsizeä¸èƒ½å°‘äºä½ çš„å­˜å–æ•°é‡ï¼Œå¦åˆ™ç¼“å­˜ä¼šå¤±æ•ˆ    self. cache = Cache(maxsize=maxsize)  @cachedmethod(cache=attrgetter('cache'))  def add(self, x, y):    print ('%s %s missing' %(x,y))    return x+yt = Test()for i in range(3):   print ('result---&gt;', t. add(i,10))for i in range(3):   print ('result---&gt;', t. add(i,10))print ('==='*10)for i in range(3):  print ('result---&gt;', t. add(i,10))123456789101112130 10 missingresult---&gt; 101 10 missingresult---&gt; 112 10 missingresult---&gt; 12result---&gt; 10result---&gt; 11result---&gt; 12==============================result---&gt; 10result---&gt; 11result---&gt; 12è‡ªå®šä¹‰åˆ©ç”¨TTLCache: 12345678910111213141516171819202122232425262728293031323334353637383940414243from cachetools import TTLCachefrom functools import wrapsclass Memorize:  def __init__(self, maxsize, ttl, create_key=None):    self. create_key = create_key or (lambda *args, **kwargs: str(args)+str(kwargs))    self. ttl = ttl    self. _cache = TTLCache(maxsize=maxsize, ttl=ttl)  def __call__(self, func):    @wraps(func)    def wrapper(*args, **kwargs):      key =  {}. {} . format(func. __qualname__, self. create_key(*args, **kwargs))      value = self. _cache. get(key, None)      if value is None:        value = func(*args, **kwargs)        if value is not None:          print ('missing----')          self. _cache[key] = value      else:        print ('hit----')      return value    return wrapper@Memorize(maxsize=3, ttl=2)def add(x,y):  return x+yfor i in range(3):   print ('result---&gt;', add(i,10))for i in range(3):   print ('result---&gt;', add(i,10))import timetime. sleep(2) # sleep 2 secondsprint ('==='*10)for i in range(3):  print ('result---&gt;', add(i,10))12345678910111213141516171819missing----result---&gt; 10missing----result---&gt; 11missing----result---&gt; 12hit----result---&gt; 10hit----result---&gt; 11hit----result---&gt; 12==============================missing----result---&gt; 10missing----result---&gt; 11missing----result---&gt; 12"
    }, {
    "id": 7,
    "url": "/python/2019/07/17/GIL-Thread-safe.html",
    "title": "GILä¸pythonçº¿ç¨‹å®‰å…¨ å•ä¾‹æ¨¡å¼ singleton",
    "body": "2019/07/17 - ä»€ä¹ˆæ˜¯GIL: global interpreter lock â€“ å…¨å±€è§£é‡Šå™¨é”CPython è§£é‡Šå™¨æ‰€é‡‡ç”¨çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒç¡®ä¿åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œ Python bytecodeã€‚æ­¤æœºåˆ¶é€šè¿‡è®¾ç½®å¯¹è±¡æ¨¡å‹ï¼ˆåŒ…æ‹¬ dict ç­‰é‡è¦å†…ç½®ç±»å‹ï¼‰é’ˆå¯¹å¹¶å‘è®¿é—®çš„éšå¼å®‰å…¨ç®€åŒ–äº† CPython å®ç°ã€‚ç»™æ•´ä¸ªè§£é‡Šå™¨åŠ é”ä½¿å¾—è§£é‡Šå™¨å¤šçº¿ç¨‹è¿è¡Œæ›´æ–¹ä¾¿ï¼Œå…¶ä»£ä»·åˆ™æ˜¯ç‰ºç‰²äº†åœ¨å¤šå¤„ç†å™¨ä¸Šçš„å¹¶è¡Œæ€§ ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨: çº¿ç¨‹å®‰å…¨æ˜¯å¤šçº¿ç¨‹ç¼–ç¨‹æ—¶çš„è®¡ç®—æœºç¨‹åºä»£ç ä¸­çš„ä¸€ä¸ªæ¦‚å¿µã€‚åœ¨æ‹¥æœ‰å…±äº«æ•°æ®çš„å¤šæ¡çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œçš„ç¨‹åºä¸­ï¼Œçº¿ç¨‹å®‰å…¨çš„ä»£ç ä¼šé€šè¿‡åŒæ­¥æœºåˆ¶ä¿è¯å„ä¸ªçº¿ç¨‹éƒ½å¯ä»¥æ­£å¸¸ä¸”æ­£ç¡®çš„æ‰§è¡Œï¼Œä¸ä¼šå‡ºç°æ•°æ®æ±¡æŸ“ç­‰æ„å¤–æƒ…å†µã€‚ python çº¿ç¨‹å®‰å…¨: GILä¿è¯çš„æ˜¯bytecodeåŒä¸€æ—¶åˆ»åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œä½†æ˜¯åŒä¸€ä¸ªæ“ä½œæ˜¯å¯¹åº”å¤šä¸ªbytecodesçš„ï¼Œåœ¨æ­¤æ—¶çº¿ç¨‹åˆ‡æ¢å°†ä¼šé€ æˆæ•°æ®æ±¡æŸ“ã€‚ python çº¿ç¨‹è°ƒåº¦: pythonä½¿ç”¨Cå®ç°çš„ï¼Œå®é™…ä¸Špythonçš„çº¿ç¨‹å°±æ˜¯Cè¯­è¨€çš„pthreadï¼Œé€šè¿‡æ“ä½œç³»ç»Ÿè°ƒåº¦ç®—æ³•è¿›è¡Œè°ƒåº¦ï¼›pythonçº¿ç¨‹è™½è¯´æ˜¯ç³»ç»Ÿçº¿ç¨‹ï¼ˆéµå¾ªç³»ç»Ÿçº¿ç¨‹è°ƒåº¦ï¼‰ï¼Œä½†æ˜¯å´æœ‰è‡ªå·±çš„åˆ‡æ¢æ¡ä»¶ï¼Œåœ¨python2ä¸­é»˜è®¤æ˜¯å­—èŠ‚ç æ‰§è¡Œ100æ¡ï¼Œpython3. 2åæ˜¯æ—¶é—´åˆ‡ç‰‡ï¼Œè¾¾åˆ°è§„åˆ™åå°±è‡ªåŠ¨å¼ºåˆ¶é‡Šæ”¾GILã€‚ python2çº¿ç¨‹åˆ‡æ¢æ¡ä»¶: 123456789# sys. setcheckinterval(interval)# Set the interpreterâ€™s â€œcheck intervalâ€. # This integer value determines how often the interpreter checks for periodic things such as thread switches and signal handlers. # The default is 100, meaning the check is performed every 100 Python virtual instructions. # Setting it to a larger value may increase performance for programs using threads. Setting it to a value &lt;= 0 checks every virtual instruction,# maximizing responsiveness as well as overhead. import sysprint(sys. getcheckinterval())12345100/Users/klook/anaconda3/envs/3. 7. 1_basic/lib/python3. 7/site-packages/ipykernel_launcher. py:9: DeprecationWarning: sys. getcheckinterval() and sys. setcheckinterval() are deprecated.  Use sys. getswitchinterval() instead.  if __name__ == '__main__':python3. 2åç‰ˆæœ¬çº¿ç¨‹åˆ‡æ¢æ¡ä»¶: 123456789# sys. setswitchinterval(interval)# Set the interpreterâ€™s thread switch interval (in seconds). # This floating-point value determines the ideal duration of the â€œtimeslicesâ€ allocated to concurrently running Python threads. # Please note that the actual value can be higher, especially if long-running internal functions or methods are used. # Also, which thread becomes scheduled at the end of the interval is the operating systemâ€™s decision. The interpreter doesnâ€™t have its own scheduler. # New in version 3. 2. import sysprint(sys. getswitchinterval())10. 005çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼ï¼ˆé¢è¯•å¯èƒ½é‡åˆ°å“¦ï¼‰: åˆ©ç”¨æ¨¡å—åªåŠ è½½ä¸€æ¬¡çš„ç‰¹æ€§: 12345678class Singleton:  __instance = None  def __new__(cls, age, name):    if not cls. __instance:      cls. __instance = object. __new__(cls)    return cls. __instancesingleton = Singleton(99, 'sky')ç»™èµ„æºåŠ é”: 123456789101112import threadinglock = threading. Lock()class Singleton:  __instance = None  def __new__(cls, age, name):    with lock:      if not cls. __instance:        cls. __instance = object. __new__(cls)    return cls. __instance1"
    }, {
    "id": 8,
    "url": "/golang/2019/07/16/go-stackover.html",
    "title": "go fmt å¼•èµ·çš„ stack overflow",
    "body": "2019/07/16 - åœ¨ GO é‡Œå®ç° String æ–¹æ³•ä¼šæ ¼å¼åŒ–è¾“å‡ºã€‚ä¾‹å¦‚ï¼š 1234567891011121314151617181920package mainimport (	 fmt )type People struct {	Name string	Age int	Sex string}func (p *People) String() string {	return fmt. Sprintf( people info: %+v , p)}func main() {	p := &amp;People{Name:  Lucy , Age: 18, Sex:  M }	fmt. Println(p)}é¢„æœŸçš„ç»“æœæ˜¯ï¼špeople info: &amp;{Name:Lucy Age:18 Sex:M}å®é™…çš„ç»“æœæ˜¯ï¼š  runtime: goroutine stack exceeds 1000000000-byte limitfatal error: stack overflowruntime stack: åœ¨ go çš„æºç é‡Œï¼šsrc/fmt/print. go::Stringerï¼Œ Stringer æ¥å£æœ‰ String æ–¹æ³•ï¼ŒPeople struct ä¹Ÿæœ‰ String æ–¹æ³•ï¼Œé—´æ¥å®ç°äº† Stringer æ¥å£ï¼Œå› æ­¤å‡ºç°äº† stack overflow çš„é”™è¯¯ï¼Œé€’å½’äº†ã€‚ è§£å†³åŠæ³•ï¼š:  æŠŠ String æ–¹æ³•æ”¹ä¸º ToString åœ¨ People. String æ–¹æ³•é‡Œä¼ é€’å±æ€§ï¼Œå³æŠŠ fmt. Sprintf( people info: %+v , p) æ”¹ä¸º fmt. Sprintf( people info: Name:%s, Age:%d, Sex:%s , p. Name, p. Age, p. Sex)å‚è€ƒæ–‡ç« : golang fmté€’å½’å¼•èµ·stack overflowå¼‚å¸¸ "
    }, {
    "id": 9,
    "url": "/tools/2019/07/14/lazydocker.html",
    "title": "lazydocker ä½¿ç”¨æ—¶ log è¿‡é•¿çš„è§£å†³æ–¹æ¡ˆ",
    "body": "2019/07/14 - Lazydocker:  The lazier way to manage everything docker - jesseduffield/lazydocker è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„å°å·¥å…·ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç° log è¿‡é•¿æ—¶æ•ˆæœä¸æ˜¯å¾ˆå¥½ã€‚ é˜…è¯»å®˜æ–¹ README åå‘ç°æ˜¯å¯ä»¥é…ç½®çš„ï¼Œé…ç½®æ–‡ä»¶è·¯å¾„å¦‚ä¸‹ï¼š Locations:- OSX: `~/Library/Application Support/jesseduffield/lazydocker/config. yml`- Linux: `~/. config/jesseduffield/lazydocker/config. yml`- Windows: `C:\\Users\\&lt;User&gt;\\AppData\\Roaming\\jesseduffield\\lazydocker\\config. yml` (I think)ä½†æ˜¯è¿™é‡Œæœ‰ä¸ªå‘äº†ï¼Œåœ¨ OSX ä¸‹çš„è·¯å¾„åº”è¯¥ä¸ºï¼š~/Library/Application\ Support/jesseduffield/lazydocker/config. ymlâš ï¸æ³¨æ„é‚£ä¸ªå³æ–œæ ï¼ é»˜è®¤çš„é…ç½®å¦‚ä¸‹ï¼Œå¦‚æœä¸Šé¢è·¯å¾„ä¸å­˜åœ¨é…ç½®æ–‡ä»¶å¯ä»¥å¤åˆ¶è¿›å»ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748gui: scrollHeight: 2 theme:  activeBorderColor:  - green  - bold  inactiveBorderColor:  - white  optionsTextColor:  - blue returnImmediately: false wrapMainPanel: falsereporting: undeterminedcommandTemplates: dockerCompose: docker-compose restartService: '{{ . DockerCompose }} restart {{ . Service. Name }}' stopService: '{{ . DockerCompose }} stop {{ . Service. Name }}' serviceLogs: '{{ . DockerCompose }} logs --since=60m --follow {{ . Service. Name }}' viewServiceLogs: '{{ . DockerCompose }} logs --follow {{ . Service. Name }}' rebuildService: '{{ . DockerCompose }} up -d --build {{ . Service. Name }}' recreateService: '{{ . DockerCompose }} up -d --force-recreate {{ . Service. Name }}' viewContainerLogs: docker logs --timestamps --follow --since=60m {{ . Container. ID  }} containerLogs: docker logs --timestamps --follow --since=60m {{ . Container. ID }} allLogs: '{{ . DockerCompose }} logs --tail=300 --follow' viewAlLogs: '{{ . DockerCompose }} logs' dockerComposeConfig: '{{ . DockerCompose }} config' checkDockerComposeConfig: '{{ . DockerCompose }} config --quiet' serviceTop: '{{ . DockerCompose }} top {{ . Service. Name }}'customCommands: containers: - name: bash  attach: true  command: docker exec -it {{ . Container. ID }} /bin/sh  serviceNames: []oS: openCommand: open {{filename}} openLinkCommand: open {{link}}update: method: neverstats: graphs: - caption: CPU (%)  statPath: DerivedStats. CPUPercentage  color: blue - caption: Memory (%)  statPath: DerivedStats. MemoryPercentage  color: greenå°†å…¶ä¸­çš„ wrapMainPanel è®¾ç½®ä¸º trueï¼Œlog è¿‡é•¿çš„é—®é¢˜å°±å¯ä»¥è§£å†³äº†ã€‚ æˆ‘ä»¬æ¥çœ‹çœ‹æ•ˆæœã€‚ "
    }, {
    "id": 10,
    "url": "/python/2019/07/10/None-ellispsis.html",
    "title": "ä¸¤ä¸ªå¸¸é‡å¯¹è±¡ï¼ŒNone ä¸ ...(ellipsis)",
    "body": "2019/07/10 - æœ¬æ–‡ä»‹ç»äº†ä¸¤ä¸ªå¸¸é‡å¯¹è±¡Noneä¸â€¦(ellipsis)çš„ä¸€äº›ç‰¹æ€§ï¼Œå‰è€…éå¸¸å¸¸è§ï¼Œåè€…å´éå¸¸å°‘ç”¨ï¼Œä½†å…¶å®å®ƒæœ‰ä¸€äº›éå¸¸pythonicçš„ç”¨æ³•ã€‚ pythonç‰ˆæœ¬: 1234# python ç‰ˆæœ¬import sysprint(sys. version)123. 6. 6 |Anaconda, Inc. | (default, Jun 28 2018, 11:07:29)[GCC 4. 2. 1 Compatible Clang 4. 0. 1 (tags/RELEASE_401/final)]1ã€Noneå¯¹è±¡: Noneåªæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œä¸æ˜¯Falseï¼Œä¹Ÿä¸æ˜¯Null 1print(type(None))1&lt;class 'NoneType'&gt;12345# 1. å•ä¾‹å±æ€§a = Noneb = Noneprint (a == b)1True123456789#2. ç”¨is å’Œis notåˆ¤æ–­a = Noneif a is None:  print ('a is None')b = Falseif b is not None:  print ('b is not None')12a is Noneb is not None123#3. ä¸å¯æ·»åŠ æˆ–è€…æ›´æ”¹å±æ€§a = Nonea. test = 112345678---------------------------------------------------------------------------AttributeError              Traceback (most recent call last)&lt;ipython-input-20-4c7cc21b8374&gt; in &lt;module&gt;()   2 a = None   3----&gt; 4 a. test = 11AttributeError: 'NoneType' object has no attribute 'test'1234567# 4.  å‡½æ•°ä¸æ˜ç¡®returnï¼Œé»˜è®¤è¿”å›Nonedef test():  passif test() is None:  print ('test return None')12#5. boolç±»å‹print (bool(None))1False2ã€â€¦ æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåªæ˜¯ä¸€ä¸ªå¯¹è±¡è€Œå·²: 1print(type(. . . ))1&lt;class 'ellipsis'&gt;1234#1. å•ä¾‹å±æ€§t = . . . d = . . . print (t == d)1True12345678#2. ç”¨is å’Œis notåˆ¤æ–­a = . . . if a is not None:  print ('a is not None')if a is . . . :  print ('a is . . . ')12a is not Nonea is . . . 1234#3. ä¸å¯æ·»åŠ æˆ–è€…æ›´æ”¹å±æ€§a = . . . a. test = 1123456789---------------------------------------------------------------------------AttributeError              Traceback (most recent call last)&lt;ipython-input-28-8f3574f64285&gt; in &lt;module&gt;()   1 #3. ä¸å¯æ·»åŠ æˆ–è€…æ›´æ”¹å±æ€§   2 a = . . . ----&gt; 3 a. test = 112AttributeError: 'ellipsis' object has no attribute 'test'123#5. boolç±»å‹print (bool(. . . ))12Trueellipsiså¯¹è±¡çš„pythonicç”¨æ³•: 123456789101112131415161718#6.  ç”¨æ³•, æ— é™é€’æ¨ (from https://farer. org/2017/11/29/python-ellipsis-object/)class Mogic(object):  def __getitem__(self, key):    if len(key) == 3 and key[2] is Ellipsis:      d = key[1] - key[0]      r = key[0]      while True:        yield r        r += dap = Mogic()for i in ap[1,2,. . . ]:  if i&lt;20:    print (i)  else:    break ## é˜»æ­¢å¾ªç¯123456789101112131415161718191234567891011121314151617181912345678#7. numpyä¸­çš„ç©æ³•(å®ç°åŸç†åŒä¸Š)import numpy as npa = np. arange(6). reshape(2,3)for x in np. nditer(a, op_flags=['readwrite']):  x[. . . ] = 2 * xprint (a)12[[ 0 2 4] [ 6 8 10]]123456789101112131415161718#8. type hintsç”¨æ³•# åœ¨ç±»å‹æç¤ºä¸­ä½¿ç”¨ Callableï¼Œä¸ç¡®å®šå‚æ•°ç­¾åæ—¶ï¼Œå¯ä»¥ç”¨ Ellipsis å ä½ã€‚from typing import Callabledef foo() -&gt; Callable[. . . , int]:  return lambda x: 1# ä½¿ç”¨ Tuple æ—¶è¿”å›ä¸å®šé•¿çš„ tupleï¼Œç”¨ Ellipsis è¿›è¡ŒæŒ‡å®šã€‚from typing import Tupledef bar() -&gt; Tuple[int, . . . ]:  return (1,2,3)def buzz() -&gt; Tuple[int, . . . ]:  return (1,2,3,4)"
    }];

var idx = lunr(function () {
    this.ref('id')
    this.field('title')
    this.field('body')

    documents.forEach(function (doc) {
        this.add(doc)
    }, this)
});
function lunr_search(term) {
    document.getElementById('lunrsearchresults').innerHTML = '<ul></ul>';
    if(term) {
        document.getElementById('lunrsearchresults').innerHTML = "<p>Search results for '" + term + "'</p>" + document.getElementById('lunrsearchresults').innerHTML;
        //put results on the screen.
        var results = idx.search(term);
        if(results.length>0){
            //console.log(idx.search(term));
            //if results
            for (var i = 0; i < results.length; i++) {
                // more statements
                var ref = results[i]['ref'];
                var url = documents[ref]['url'];
                var title = documents[ref]['title'];
                var body = documents[ref]['body'].substring(0,160)+'...';
                document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML + "<li class='lunrsearchresult'><a href='" + url + "'><span class='title'>" + title + "</span><br /><span class='body'>"+ body +"</span><br /><span class='url'>"+ url +"</span></a></li>";
            }
        } else {
            document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = "<li class='lunrsearchresult'>No results found...</li>";
        }
    }
    return false;
}

function lunr_search(term) {
    $('#lunrsearchresults').show( 400 );
    $( "body" ).addClass( "modal-open" );
    
    document.getElementById('lunrsearchresults').innerHTML = '<div id="resultsmodal" class="modal fade show d-block"  tabindex="-1" role="dialog" aria-labelledby="resultsmodal"> <div class="modal-dialog shadow-lg" role="document"> <div class="modal-content"> <div class="modal-header" id="modtit"> <button type="button" class="close" id="btnx" data-dismiss="modal" aria-label="Close"> &times; </button> </div> <div class="modal-body"> <ul class="mb-0"> </ul>    </div> <div class="modal-footer"><button id="btnx" type="button" class="btn btn-danger btn-sm" data-dismiss="modal">Close</button></div></div> </div></div>';
    if(term) {
        document.getElementById('modtit').innerHTML = "<h5 class='modal-title'>Search results for '" + term + "'</h5>" + document.getElementById('modtit').innerHTML;
        //put results on the screen.
        var results = idx.search(term);
        if(results.length>0){
            //console.log(idx.search(term));
            //if results
            for (var i = 0; i < results.length; i++) {
                // more statements
                var ref = results[i]['ref'];
                var url = documents[ref]['url'];
                var title = documents[ref]['title'];
                var body = documents[ref]['body'].substring(0,160)+'...';
                document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML + "<li class='lunrsearchresult'><a href='" + url + "'><span class='title'>" + title + "</span><br /><small><span class='body'>"+ body +"</span><br /><span class='url'>"+ url +"</span></small></a></li>";
            }
        } else {
            document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = "<li class='lunrsearchresult'>Sorry, no results found. Close & try a different search!</li>";
        }
    }
    return false;
}
    
$(function() {
    $("#lunrsearchresults").on('click', '#btnx', function () {
        $('#lunrsearchresults').hide( 5 );
        $( "body" ).removeClass( "modal-open" );
    });
});